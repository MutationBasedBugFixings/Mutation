diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-b/.defects4j.config /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-f/.defects4j.config
--- /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-b/.defects4j.config	2025-11-02 21:23:27.757294578 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-f/.defects4j.config	2025-11-02 21:23:28.520285999 +0800
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=JxPath
-vid=19b
+vid=19f
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-b/src/java/org/apache/commons/jxpath/ri/model/dom/DOMNodePointer.java /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-f/src/java/org/apache/commons/jxpath/ri/model/dom/DOMNodePointer.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-b/src/java/org/apache/commons/jxpath/ri/model/dom/DOMNodePointer.java	2025-11-02 21:23:27.758294566 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-f/src/java/org/apache/commons/jxpath/ri/model/dom/DOMNodePointer.java	2025-11-02 21:23:28.632284740 +0800
@@ -557,17 +557,21 @@
         int count = 1;
         Node n = node.getPreviousSibling();
         while (n != null) {
-            if (n.getNodeType() == Node.ELEMENT_NODE) {
-                String nm = n.getNodeName();
-                if (nm.equals(node.getNodeName())) {
+            if (n.getNodeType() == Node.ELEMENT_NODE && matchesQName(n)) {
                 count++;
-                }
             }
             n = n.getPreviousSibling();
         }
         return count;
     }
 
+    private boolean matchesQName(Node n) {
+        if (getNamespaceURI() != null) {
+            return equalStrings(getNamespaceURI(n), getNamespaceURI())
+                    && equalStrings(node.getLocalName(), n.getLocalName());
+        }
+        return equalStrings(node.getNodeName(), n.getNodeName());
+    }
 
     /**
      * Get relative position of this among all siblings.
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-b/src/java/org/apache/commons/jxpath/ri/model/jdom/JDOMNodePointer.java /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-f/src/java/org/apache/commons/jxpath/ri/model/jdom/JDOMNodePointer.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-b/src/java/org/apache/commons/jxpath/ri/model/jdom/JDOMNodePointer.java	2025-11-02 21:23:27.758294566 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff/JxPath-19-f/src/java/org/apache/commons/jxpath/ri/model/jdom/JDOMNodePointer.java	2025-11-02 21:23:28.632284740 +0800
@@ -693,8 +693,7 @@
             String name = ((Element) node).getQualifiedName();
             for (int i = 0; i < children.size(); i++) {
                 Object child = children.get(i);
-                if ((child instanceof Element)
-                    && ((Element) child).getQualifiedName().equals(name)) {
+                if (child instanceof Element && matchesQName(((Element) child))) {
                     count++;
                 }
                 if (child == node) {
@@ -706,6 +705,15 @@
         return 1;
     }
 
+    private boolean matchesQName(Element element) {
+        if (getNamespaceURI() != null) {
+            String ns = getNamespaceURI(element);
+            if (ns == null || !ns.equals(getNamespaceURI())) {
+                return false;
+            }
+        }
+        return element.getName().equals(((Element) node).getName());
+    }
 
     /**
      * Get relative position of this among all siblings.
