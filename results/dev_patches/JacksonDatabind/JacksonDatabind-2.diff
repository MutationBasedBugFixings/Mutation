diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksondatabind/JacksonDatabind-2-b/.defects4j.config /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksondatabind/JacksonDatabind-2-f/.defects4j.config
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksondatabind/JacksonDatabind-2-b/.defects4j.config	2025-11-08 12:07:59.292925213 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksondatabind/JacksonDatabind-2-f/.defects4j.config	2025-11-08 12:08:04.831309675 +0800
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=JacksonDatabind
-vid=2b
+vid=2f
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksondatabind/JacksonDatabind-2-b/src/main/java/com/fasterxml/jackson/databind/util/TokenBuffer.java /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksondatabind/JacksonDatabind-2-f/src/main/java/com/fasterxml/jackson/databind/util/TokenBuffer.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksondatabind/JacksonDatabind-2-b/src/main/java/com/fasterxml/jackson/databind/util/TokenBuffer.java	2025-11-08 12:07:59.298925632 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksondatabind/JacksonDatabind-2-f/src/main/java/com/fasterxml/jackson/databind/util/TokenBuffer.java	2025-11-08 12:08:04.913315340 +0800
@@ -780,19 +780,39 @@
     @Override
     public void writeObject(Object value) throws IOException
     {
+        if (value == null) {
+            writeNull();
+            return;
+        }
+        Class<?> raw = value.getClass();
+        if (raw == byte[].class) {
             _append(JsonToken.VALUE_EMBEDDED_OBJECT, value);
+            return;
+        } else if (_objectCodec == null) {
             /* 28-May-2014, tatu: Tricky choice here; if no codec, should we
              *   err out, or just embed? For now, do latter.
              */
 //          throw new JsonMappingException("No ObjectCodec configured for TokenBuffer, writeObject() called");
+            _append(JsonToken.VALUE_EMBEDDED_OBJECT, value);
+        } else {
+            _objectCodec.writeValue(this, value);
+        }
     }
 
     @Override
     public void writeTree(TreeNode node) throws IOException
     {
+        if (node == null) {
+            writeNull();
+            return;
+        }
 
+        if (_objectCodec == null) {
             // as with 'writeObject()', is codec optional?
             _append(JsonToken.VALUE_EMBEDDED_OBJECT, node);
+        } else {
+            _objectCodec.writeTree(this, node);
+        }
     }
 
     /*
