diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_collection/Collections-18-b/.defects4j.config /home1/furqan/my_mutation_experiments/d4j_work_diff_collection/Collections-18-f/.defects4j.config
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_collection/Collections-18-b/.defects4j.config	2025-11-05 09:47:15.212742110 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_collection/Collections-18-f/.defects4j.config	2025-11-05 09:47:18.155723541 +0800
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=Collections
-vid=18b
+vid=18f
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_collection/Collections-18-b/src/main/java/org/apache/commons/collections/set/ListOrderedSet.java /home1/furqan/my_mutation_experiments/d4j_work_diff_collection/Collections-18-f/src/main/java/org/apache/commons/collections/set/ListOrderedSet.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_collection/Collections-18-b/src/main/java/org/apache/commons/collections/set/ListOrderedSet.java	2025-11-05 09:47:15.214742097 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_collection/Collections-18-f/src/main/java/org/apache/commons/collections/set/ListOrderedSet.java	2025-11-05 09:47:18.212723182 +0800
@@ -226,20 +226,26 @@
 
     @Override
     public boolean retainAll(Collection<?> coll) {
-        boolean result = collection.retainAll(coll);
-        if (result == false) {
+        Set<Object> collectionRetainAll = new HashSet<Object>();
+        for (Iterator<?> it = coll.iterator(); it.hasNext();) {
+            Object next = it.next();
+            if (collection.contains(next)) {
+                collectionRetainAll.add(next);
+            }
+        }
+        if (collectionRetainAll.size() == collection.size()) {
             return false;
         }
-        if (collection.size() == 0) {
-            setOrder.clear();
+        if (collectionRetainAll.size() == 0) {
+            clear();
         } else {
-            for (Iterator<E> it = setOrder.iterator(); it.hasNext();) {
-                if (!collection.contains(it.next())) {
+            for (Iterator<E> it = iterator(); it.hasNext();) {
+                if (!collectionRetainAll.contains(it.next())) {
                     it.remove();
                 }
             }
         }
-        return result;
+        return true;
     }
 
     @Override
