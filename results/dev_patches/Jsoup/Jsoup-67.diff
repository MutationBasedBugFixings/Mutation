diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-67-b/.defects4j.config /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-67-f/.defects4j.config
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-67-b/.defects4j.config	2025-11-06 20:11:35.707076210 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-67-f/.defects4j.config	2025-11-06 20:11:37.229110433 +0800
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=Jsoup
-vid=67b
+vid=67f
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-67-b/src/main/java/org/jsoup/parser/HtmlTreeBuilder.java /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-67-f/src/main/java/org/jsoup/parser/HtmlTreeBuilder.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-67-b/src/main/java/org/jsoup/parser/HtmlTreeBuilder.java	2025-11-06 20:11:35.709076255 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-67-f/src/main/java/org/jsoup/parser/HtmlTreeBuilder.java	2025-11-06 20:11:37.288111757 +0800
@@ -39,6 +39,7 @@
         "section", "select", "style", "summary", "table", "tbody", "td", "textarea", "tfoot", "th", "thead",
         "title", "tr", "ul", "wbr", "xmp"});
 
+    public static final int MaxScopeSearchDepth = 100; // prevents the parser bogging down in exceptionally broken pages
 
     private HtmlTreeBuilderState state; // the current state
     private HtmlTreeBuilderState originalState; // original / marked state
@@ -465,6 +466,9 @@
 
     private boolean inSpecificScope(String[] targetNames, String[] baseTypes, String[] extraTypes) {
         int depth = stack.size() -1;
+        if (depth > MaxScopeSearchDepth) {
+            depth = MaxScopeSearchDepth;
+        }
         for (int pos = depth; pos >= 0; pos--) {
             Element el = stack.get(pos);
             String elName = el.nodeName();
