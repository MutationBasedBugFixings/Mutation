diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-7-b/.defects4j.config /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-7-f/.defects4j.config
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-7-b/.defects4j.config	2025-11-06 20:07:32.496528128 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-7-f/.defects4j.config	2025-11-06 20:07:34.035509121 +0800
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=Jsoup
-vid=7b
+vid=7f
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-7-b/src/main/java/org/jsoup/nodes/Document.java /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-7-f/src/main/java/org/jsoup/nodes/Document.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-7-b/src/main/java/org/jsoup/nodes/Document.java	2025-11-06 20:07:32.498528104 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-7-f/src/main/java/org/jsoup/nodes/Document.java	2025-11-06 20:07:34.079508577 +0800
@@ -2,6 +2,7 @@
 
 import org.jsoup.helper.Validate;
 import org.jsoup.parser.Tag;
+import org.jsoup.select.Elements;
 
 import java.nio.charset.Charset;
 import java.nio.charset.CharsetEncoder;
@@ -110,6 +111,8 @@
         normaliseTextNodes(htmlEl);
         normaliseTextNodes(this);
 
+        normaliseStructure("head", htmlEl);
+        normaliseStructure("body", htmlEl);
         
         return this;
     }
@@ -134,7 +137,26 @@
     }
 
     // merge multiple <head> or <body> contents into one, delete the remainder, and ensure they are owned by <html>
+    private void normaliseStructure(String tag, Element htmlEl) {
+        Elements elements = this.getElementsByTag(tag);
+        Element master = elements.first(); // will always be available as created above if not existent
+        if (elements.size() > 1) { // dupes, move contents to master
+            List<Node> toMove = new ArrayList<Node>();
+            for (int i = 1; i < elements.size(); i++) {
+                Node dupe = elements.get(i);
+                for (Node node : dupe.childNodes)
+                    toMove.add(node);
+                dupe.remove();
+            }
+
+            for (Node dupe : toMove)
+                master.appendChild(dupe);
+        }
         // ensure parented by <html>
+        if (!master.parent().equals(htmlEl)) {
+            htmlEl.appendChild(master); // includes remove()            
+        }
+    }
 
     // fast method to get first by tag name, used for html, head, body finders
     private Element findFirstElementByTagName(String tag, Node node) {
