diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-11-b/.defects4j.config /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-11-f/.defects4j.config
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-11-b/.defects4j.config	2025-11-06 20:07:45.115372338 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-11-f/.defects4j.config	2025-11-06 20:07:46.643353483 +0800
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=Jsoup
-vid=11b
+vid=11f
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-11-b/src/main/java/org/jsoup/select/Selector.java /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-11-f/src/main/java/org/jsoup/select/Selector.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-11-b/src/main/java/org/jsoup/select/Selector.java	2025-11-06 20:07:45.117372313 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_jsoup/Jsoup-11-f/src/main/java/org/jsoup/select/Selector.java	2025-11-06 20:07:46.688352928 +0800
@@ -107,6 +107,8 @@
         if (tq.matchesAny(combinators)) { // if starts with a combinator, use root as elements
             elements.add(root);
             combinator(tq.consume().toString());
+        } else if (tq.matches(":has(")) {
+            elements.addAll(root.getAllElements());
         } else {
             addElements(findElements()); // chomp first element matcher off queue 
         }            
@@ -178,6 +180,8 @@
             return matches(false);
         } else if (tq.matches(":matchesOwn(")) {
             return matches(true);
+        } else if (tq.matches(":not(")) {
+            return not();
         } else { // unhandled
             throw new SelectorParseException("Could not parse query '%s': unexpected token at '%s'", query, tq.remainder());
         }
@@ -302,7 +306,13 @@
     }
 
     // :not(selector)
+    private Elements not() {
+        tq.consume(":not");
+        String subQuery = tq.chompBalanced('(', ')');
+        Validate.notEmpty(subQuery, ":not(selector) subselect must not be empty");
 
+        return filterOut(root.getAllElements(), select(subQuery, root));
+    }
 
     // direct child descendants
     private static Elements filterForChildren(Collection<Element> parents, Collection<Element> candidates) {
@@ -396,6 +406,21 @@
     }
 
     // exclude set. package open so that Elements can implement .not() selector.
+    static Elements filterOut(Collection<Element> elements, Collection<Element> outs) {
+        Elements output = new Elements();
+        for (Element el: elements) {
+            boolean found = false;
+            for (Element out: outs) {
+                if (el.equals(out)) {
+                    found = true;
+                    break;
+                }
+            }
+            if (!found)
+                output.add(el);
+        }
+        return output;
+    }
 
     public static class SelectorParseException extends IllegalStateException {
         public SelectorParseException(String msg, Object... params) {
