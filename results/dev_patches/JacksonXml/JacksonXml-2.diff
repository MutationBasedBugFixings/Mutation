diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksonxml/JacksonXml-2-b/.defects4j.config /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksonxml/JacksonXml-2-f/.defects4j.config
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksonxml/JacksonXml-2-b/.defects4j.config	2025-11-05 19:49:34.693820042 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksonxml/JacksonXml-2-f/.defects4j.config	2025-11-05 19:49:35.695812867 +0800
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=JacksonXml
-vid=2b
+vid=2f
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksonxml/JacksonXml-2-b/src/main/java/com/fasterxml/jackson/dataformat/xml/deser/XmlTokenStream.java /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksonxml/JacksonXml-2-f/src/main/java/com/fasterxml/jackson/dataformat/xml/deser/XmlTokenStream.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksonxml/JacksonXml-2-b/src/main/java/com/fasterxml/jackson/dataformat/xml/deser/XmlTokenStream.java	2025-11-05 19:49:34.695820027 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_jacksonxml/JacksonXml-2-f/src/main/java/com/fasterxml/jackson/dataformat/xml/deser/XmlTokenStream.java	2025-11-05 19:49:35.754812445 +0800
@@ -59,6 +59,7 @@
      *
      * @since 2.8
      */
+    protected boolean _mixedText;
 
     /**
      * Index of the next attribute of the current START_ELEMENT
@@ -321,15 +322,24 @@
             }
             // otherwise need to find START/END_ELEMENT or text
             String text = _collectUntilTag();
+            final boolean startElementNext = _xmlReader.getEventType() == XMLStreamReader.START_ELEMENT;
             // If we have no/all-whitespace text followed by START_ELEMENT, ignore text
-            if (_xmlReader.getEventType() == XMLStreamReader.START_ELEMENT) {
+            if (startElementNext) {
+                if (text == null || _allWs(text)) {
+                    _mixedText = false;
                     return _initStartElement();
+                }
+                _mixedText = true;
+                _textValue = text;
+                return (_currentState = XML_TEXT);
             }
             // For END_ELEMENT we will return text, if any
             if (text != null) {
+                _mixedText = false;
                 _textValue = text;
                 return (_currentState = XML_TEXT);
             }
+            _mixedText = false;
             return _handleEndElement();
 
         case XML_ATTRIBUTE_NAME:
@@ -337,6 +347,10 @@
             return (_currentState = XML_ATTRIBUTE_VALUE);
         case XML_TEXT:
             // mixed text with other elements
+            if (_mixedText){
+                _mixedText = false;
+                return _initStartElement();
+            }
             // text followed by END_ELEMENT
             return _handleEndElement();
         case XML_END:
@@ -503,6 +517,18 @@
     }
 
 
+    protected boolean _allWs(String str)
+    {
+        final int len = (str == null) ? 0 : str.length();
+        if (len > 0) {
+            for (int i = 0; i < len; ++i) {
+                if (str.charAt(i) > ' ') {
+                    return false;
+                }
+            }
+        }
+        return true;
+    }
     
     // for DEBUGGING
     @Override
