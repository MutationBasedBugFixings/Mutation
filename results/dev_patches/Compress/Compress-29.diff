diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/.defects4j.config /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/.defects4j.config
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/.defects4j.config	2025-11-04 21:53:14.952029146 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/.defects4j.config	2025-11-04 21:53:18.499993206 +0800
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=Compress
-vid=29b
+vid=29f
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/ArchiveStreamFactory.java /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/ArchiveStreamFactory.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/ArchiveStreamFactory.java	2025-11-04 21:53:14.953029136 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/ArchiveStreamFactory.java	2025-11-04 21:53:18.572992467 +0800
@@ -294,7 +294,11 @@
             }
         }
         if (JAR.equalsIgnoreCase(archiverName)) {
+            if (entryEncoding != null) {
+                return new JarArchiveOutputStream(out, entryEncoding);
+            } else {
                 return new JarArchiveOutputStream(out);
+            }
         }
         if (CPIO.equalsIgnoreCase(archiverName)) {
             if (entryEncoding != null) {
@@ -357,7 +361,11 @@
                     return new CpioArchiveInputStream(in);
                 }
             } else if (ArjArchiveInputStream.matches(signature, signatureLength)) {
+                if (entryEncoding != null) {
+                    return new ArjArchiveInputStream(in, entryEncoding);
+                } else {
                     return new ArjArchiveInputStream(in);
+                }
             } else if (SevenZFile.matches(signature, signatureLength)) {
                 throw new StreamingNotSupportedException(SEVEN_Z);
             }
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveInputStream.java /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveInputStream.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveInputStream.java	2025-11-04 21:53:14.953029136 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveInputStream.java	2025-11-04 21:53:18.572992467 +0800
@@ -94,6 +94,7 @@
     private final ZipEncoding zipEncoding;
 
     // the provided encoding (for unit tests)
+    final String encoding;
 
     /**
      * Construct the cpio input stream with a blocksize of {@link
@@ -152,6 +153,7 @@
     public CpioArchiveInputStream(final InputStream in, int blockSize, String encoding) {
         this.in = in;
         this.blockSize = blockSize;
+        this.encoding = encoding;
         this.zipEncoding = ZipEncodingHelper.getZipEncoding(encoding);
     }
 
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveOutputStream.java /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveOutputStream.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveOutputStream.java	2025-11-04 21:53:14.954029126 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveOutputStream.java	2025-11-04 21:53:18.572992467 +0800
@@ -95,6 +95,7 @@
     private final ZipEncoding zipEncoding;
 
     // the provided encoding (for unit tests)
+    final String encoding;
 
     /**
      * Construct the cpio output stream with a specified format, a
@@ -159,6 +160,7 @@
         }
         this.entryFormat = format;
         this.blockSize = blockSize;
+        this.encoding = encoding;
         this.zipEncoding = ZipEncodingHelper.getZipEncoding(encoding);
     }
 
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/dump/DumpArchiveInputStream.java /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/dump/DumpArchiveInputStream.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/dump/DumpArchiveInputStream.java	2025-11-04 21:53:14.954029126 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/dump/DumpArchiveInputStream.java	2025-11-04 21:53:18.572992467 +0800
@@ -77,6 +77,7 @@
     private final ZipEncoding zipEncoding;
 
     // the provided encoding (for unit tests)
+    final String encoding;
 
     /**
      * Constructor using the platform's default encoding for file
@@ -101,6 +102,7 @@
         throws ArchiveException {
         this.raw = new TapeInputStream(is);
         this.hasHitEOF = false;
+        this.encoding = encoding;
         this.zipEncoding = ZipEncodingHelper.getZipEncoding(encoding);
 
         try {
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStream.java /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStream.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStream.java	2025-11-04 21:53:14.955029116 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStream.java	2025-11-04 21:53:18.573992457 +0800
@@ -76,6 +76,7 @@
     private final ZipEncoding zipEncoding;
 
     // the provided encoding (for unit tests)
+    final String encoding;
 
     /**
      * Constructor for TarInputStream.
@@ -139,6 +140,7 @@
                                  String encoding) {
         this.is = is;
         this.hasHitEOF = false;
+        this.encoding = encoding;
         this.zipEncoding = ZipEncodingHelper.getZipEncoding(encoding);
         this.recordSize = recordSize;
         this.blockSize = blockSize;
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java	2025-11-04 21:53:14.955029116 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java	2025-11-04 21:53:18.573992457 +0800
@@ -87,6 +87,7 @@
     private final ZipEncoding zipEncoding;
 
     // the provided encoding (for unit tests)
+    final String encoding;
 
     private boolean addPaxHeadersForNonAsciiNames = false;
     private static final ZipEncoding ASCII =
@@ -152,6 +153,7 @@
     public TarArchiveOutputStream(OutputStream os, int blockSize,
                                   int recordSize, String encoding) {
         out = new CountingOutputStream(os);
+        this.encoding = encoding;
         this.zipEncoding = ZipEncodingHelper.getZipEncoding(encoding);
 
         this.assemLen = 0;
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveInputStream.java /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveInputStream.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-b/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveInputStream.java	2025-11-04 21:53:14.955029116 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_compress/Compress-29-f/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveInputStream.java	2025-11-04 21:53:18.573992457 +0800
@@ -62,6 +62,7 @@
     private final ZipEncoding zipEncoding;
 
     // the provided encoding (for unit tests)
+    final String encoding;
 
     /** Whether to look for and use Unicode extra fields. */
     private final boolean useUnicodeExtraFields;
@@ -181,6 +182,7 @@
                                  String encoding,
                                  boolean useUnicodeExtraFields,
                                  boolean allowStoredEntriesWithDataDescriptor) {
+        this.encoding = encoding;
         zipEncoding = ZipEncodingHelper.getZipEncoding(encoding);
         this.useUnicodeExtraFields = useUnicodeExtraFields;
         in = new PushbackInputStream(inputStream, buf.capacity());
