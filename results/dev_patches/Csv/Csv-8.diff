diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_csv/Csv-8-b/.defects4j.config /home1/furqan/my_mutation_experiments/d4j_work_diff_csv/Csv-8-f/.defects4j.config
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_csv/Csv-8-b/.defects4j.config	2025-11-05 11:25:21.581103275 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_csv/Csv-8-f/.defects4j.config	2025-11-05 11:25:24.492091451 +0800
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=Csv
-vid=8b
+vid=8f
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_csv/Csv-8-b/src/main/java/org/apache/commons/csv/CSVFormat.java /home1/furqan/my_mutation_experiments/d4j_work_diff_csv/Csv-8-f/src/main/java/org/apache/commons/csv/CSVFormat.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_csv/Csv-8-b/src/main/java/org/apache/commons/csv/CSVFormat.java	2025-11-05 11:25:21.582103271 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_csv/Csv-8-f/src/main/java/org/apache/commons/csv/CSVFormat.java	2025-11-05 11:25:24.557091186 +0800
@@ -313,6 +313,12 @@
         if (header == null) {
         	this.header = null;
         } else {
+        	Set<String> dupCheck = new HashSet<String>();
+        	for(String hdr : header) {
+        		if (!dupCheck.add(hdr)) {
+        			throw new IllegalArgumentException("The header contains a duplicate entry: '" + hdr + "' in " + Arrays.toString(header));
+        		}
+        	}
             this.header = header.clone();        	
         }
         this.skipHeaderRecord = skipHeaderRecord;
@@ -662,13 +668,6 @@
             throw new IllegalStateException("No quotes mode set but no escape character is set");
         }
 
-        if (header != null) {
-            final Set<String> set = new HashSet<String>(header.length);
-            set.addAll(Arrays.asList(header));
-            if (set.size() != header.length) {
-                throw new IllegalStateException("The header contains duplicate names: " + Arrays.toString(header));
-            }
-        }
     }
 
     /**
