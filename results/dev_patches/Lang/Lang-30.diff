diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_lang/Lang-30-b/.defects4j.config /home1/furqan/my_mutation_experiments/d4j_work_diff_lang/Lang-30-f/.defects4j.config
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_lang/Lang-30-b/.defects4j.config	2025-11-08 19:58:47.101893112 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_lang/Lang-30-f/.defects4j.config	2025-11-08 19:58:51.065881333 +0800
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=Lang
-vid=30b
+vid=30f
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff_lang/Lang-30-b/src/main/java/org/apache/commons/lang3/StringUtils.java /home1/furqan/my_mutation_experiments/d4j_work_diff_lang/Lang-30-f/src/main/java/org/apache/commons/lang3/StringUtils.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff_lang/Lang-30-b/src/main/java/org/apache/commons/lang3/StringUtils.java	2025-11-08 19:58:47.104893103 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff_lang/Lang-30-f/src/main/java/org/apache/commons/lang3/StringUtils.java	2025-11-08 19:58:51.144881098 +0800
@@ -1373,13 +1373,21 @@
             return INDEX_NOT_FOUND;
         }
         int csLen = cs.length();
+        int csLast = csLen - 1;
         int searchLen = searchChars.length;
+        int searchLast = searchLen - 1;
         for (int i = 0; i < csLen; i++) {
             char ch = cs.charAt(i);
             for (int j = 0; j < searchLen; j++) {
                 if (searchChars[j] == ch) {
+                    if (i < csLast && j < searchLast && Character.isHighSurrogate(ch)) {
                         // ch is a supplementary character
+                        if (searchChars[j + 1] == cs.charAt(i + 1)) {
+                            return i;
+                        }
+                    } else {
                         return i;
+                    }
                 }
             }
         }
@@ -1440,7 +1448,7 @@
      * <code>false</code> if no match or null input
      * @since 2.4
      */
-    public static boolean containsAny(CharSequence cs, char[] searchChars) {
+    public static boolean containsAny(String cs, char[] searchChars) {
         if (isEmpty(cs) || ArrayUtils.isEmpty(searchChars)) {
             return false;
         }
@@ -1452,9 +1460,12 @@
             char ch = cs.charAt(i);
             for (int j = 0; j < searchLength; j++) {
                 if (searchChars[j] == ch) {
-                    if (i < csLast && j < searchLast && ch >= Character.MIN_HIGH_SURROGATE && ch <= Character.MAX_HIGH_SURROGATE) {
+                    if (Character.isHighSurrogate(ch)) {
+                        if (j == searchLast) {
                             // missing low surrogate, fine, like String.indexOf(String)
-                        if (searchChars[j + 1] == cs.charAt(i + 1)) {
+                            return true;
+                        }
+                        if (i < csLast && searchChars[j + 1] == cs.charAt(i + 1)) {
                             return true;
                         }
                     } else {
@@ -1494,7 +1505,7 @@
      * @return the <code>true</code> if any of the chars are found, <code>false</code> if no match or null input
      * @since 2.4
      */
-    public static boolean containsAny(CharSequence cs, String searchChars) {
+    public static boolean containsAny(String cs, String searchChars) {
         if (searchChars == null) {
             return false;
         }
@@ -1530,13 +1541,21 @@
             return INDEX_NOT_FOUND;
         }
         int csLen = cs.length();
+        int csLast = csLen - 1;
         int searchLen = searchChars.length;
+        int searchLast = searchLen - 1;
         outer:
         for (int i = 0; i < csLen; i++) {
             char ch = cs.charAt(i);
             for (int j = 0; j < searchLen; j++) {
                 if (searchChars[j] == ch) {
+                    if (i < csLast && j < searchLast && Character.isHighSurrogate(ch)) {
+                        if (searchChars[j + 1] == cs.charAt(i + 1)) {
+                            continue outer;
+                        }
+                    } else {
                         continue outer;
+                    }
                 }
             }
             return i;
@@ -1573,8 +1592,16 @@
         int strLen = str.length();
         for (int i = 0; i < strLen; i++) {
             char ch = str.charAt(i);
-            if (searchChars.indexOf(ch) < 0) {
+            boolean chFound = searchChars.indexOf(ch) >= 0;
+            if (i + 1 < strLen && Character.isHighSurrogate(ch)) {
+                char ch2 = str.charAt(i + 1);
+                if (chFound && searchChars.indexOf(ch2) < 0) {
                     return i;
+                }
+            } else {
+                if (!chFound) {
+                    return i;
+                }
             }
         }
         return INDEX_NOT_FOUND;
@@ -1675,14 +1702,25 @@
             return true;
         }
         int csLen = cs.length();
+        int csLast = csLen - 1;
         int searchLen = searchChars.length;
+        int searchLast = searchLen - 1;
         for (int i = 0; i < csLen; i++) {
             char ch = cs.charAt(i);
             for (int j = 0; j < searchLen; j++) {
                 if (searchChars[j] == ch) {
+                    if (Character.isHighSurrogate(ch)) {
+                        if (j == searchLast) {
                             // missing low surrogate, fine, like String.indexOf(String)
+                            return false;
+                        }
+                        if (i < csLast && searchChars[j + 1] == cs.charAt(i + 1)) {
+                            return false;
+                        }
+                    } else {
                         // ch is in the Basic Multilingual Plane
                         return false;
+                    }
                 }
             }
         }
