diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-b/.defects4j.config /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-f/.defects4j.config
--- /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-b/.defects4j.config	2025-11-12 13:04:15.329290744 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-f/.defects4j.config	2025-11-12 13:04:19.286290461 +0800
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=Closure
-vid=149b
+vid=149f
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-b/src/com/google/javascript/jscomp/AbstractCommandLineRunner.java /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-f/src/com/google/javascript/jscomp/AbstractCommandLineRunner.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-b/src/com/google/javascript/jscomp/AbstractCommandLineRunner.java	2025-11-12 13:04:15.330290744 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-f/src/com/google/javascript/jscomp/AbstractCommandLineRunner.java	2025-11-12 13:04:19.364290455 +0800
@@ -156,6 +156,7 @@
     options.setCodingConvention(config.codingConvention);
     options.setSummaryDetailLevel(config.summaryDetailLevel);
 
+    options.outputCharset = getOutputCharset();
     inputCharset = getInputCharset();
 
     if (config.jsOutputFile.length() > 0) {
@@ -515,11 +516,6 @@
     Result result;
 
     setRunOptions(options);
-    if (inputCharset == Charsets.UTF_8) {
-      options.outputCharset = Charsets.US_ASCII;
-    } else {
-      options.outputCharset = inputCharset;
-    }
 
     boolean writeOutputToFile = !options.jsOutputFile.isEmpty();
     if (writeOutputToFile) {
@@ -690,6 +686,16 @@
    *    be a supported charset.
    * @throws FlagUsageException if flag is not a valid Charset name.
    */
+  private String getOutputCharset() throws FlagUsageException {
+    if (!config.charset.isEmpty()) {
+      if (!Charset.isSupported(config.charset)) {
+        throw new FlagUsageException(config.charset +
+            " is not a valid charset name.");
+      }
+      return config.charset;
+    }
+    return "US-ASCII";
+  }
 
   protected List<JSSourceFile> createExterns() throws FlagUsageException,
       IOException {
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-b/src/com/google/javascript/jscomp/CommandLineRunner.java /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-f/src/com/google/javascript/jscomp/CommandLineRunner.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-b/src/com/google/javascript/jscomp/CommandLineRunner.java	2025-11-12 13:04:15.331290744 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-f/src/com/google/javascript/jscomp/CommandLineRunner.java	2025-11-12 13:04:19.365290455 +0800
@@ -468,7 +468,6 @@
     }
 
     options.closurePass = flags.process_closure_primitives;
-    initOptionsFromFlags(options);
     return options;
   }
 
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-b/src/com/google/javascript/jscomp/Compiler.java /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-f/src/com/google/javascript/jscomp/Compiler.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-b/src/com/google/javascript/jscomp/Compiler.java	2025-11-12 13:04:15.331290744 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-f/src/com/google/javascript/jscomp/Compiler.java	2025-11-12 13:04:19.366290455 +0800
@@ -1359,7 +1359,8 @@
     builder.setSourceMap(sourceMap);
     builder.setSourceMapDetailLevel(options.sourceMapDetailLevel);
 
-    Charset charset = options.outputCharset;
+    Charset charset = options.outputCharset != null ?
+        Charset.forName(options.outputCharset) : null;
     builder.setOutputCharset(charset);
 
     return builder.build();
diff -ruN --exclude .git --exclude .svn --exclude .hg --exclude .idea --exclude .settings --exclude .classpath --exclude .project --exclude target --exclude build --exclude out --exclude bin --exclude '*.class' --exclude '*.jar' --exclude '*.war' --exclude '*.ear' --exclude '*.zip' --exclude '*.tar' --exclude '*.gz' /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-b/src/com/google/javascript/jscomp/CompilerOptions.java /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-f/src/com/google/javascript/jscomp/CompilerOptions.java
--- /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-b/src/com/google/javascript/jscomp/CompilerOptions.java	2025-11-12 13:04:15.332290744 +0800
+++ /home1/furqan/my_mutation_experiments/d4j_work_diff/Closure-149-f/src/com/google/javascript/jscomp/CompilerOptions.java	2025-11-12 13:04:19.366290455 +0800
@@ -585,7 +585,7 @@
    * Charset to use when generating code.  If null, then output ASCII.
    * This needs to be a string because CompilerOptions is serializable.
    */
-  public Charset outputCharset;
+  String outputCharset;
 
   /**
    * Whether the named objects types included 'undefined' by default.
@@ -957,6 +957,9 @@
   /**
    * Sets the output charset by name.
    */
+  public void setOutputCharset(String charsetName) {
+    this.outputCharset = charsetName;
+  }
 
   /**
    * Whether to include "undefined" in the default types.
